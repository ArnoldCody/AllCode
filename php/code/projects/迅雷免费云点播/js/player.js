(function(){setTimeout(function(){function x(a,b,c,d){if(arguments.length>2){var e=new Date((new Date).getTime()+c*36e5);document.cookie=a+"="+encodeURIComponent(b)+"; path=/; domain=xunlei.com; expires="+e.toGMTString()}else document.cookie=a+"="+encodeURIComponent(b)+"; path=/; domain=xunlei.com"}function w(a,b){return a.getAttribute(b)}function v(a,b,c){var d=a;window[b]=c;d+="&callback="+b;var e=new t(d);e.buildScriptTag();e.addScriptTag();return this}function u(a,b,c){var d=a;if(b)window[b]=c;if(d.indexOf("?")!=-1){d+="&jsonp="+b}else{d+="?jsonp="+b}var e=new t(d);e.buildScriptTag();e.addScriptTag()}function t(a){this.fullUrl=a;this.noCacheIE="&noCacheIE="+(new Date).getTime();this.headLoc=document.getElementsByTagName("head").item(0);this.scriptId="JscriptId"+t.scriptCounter++}function s(a){return encodeURIComponent(a)}function r(a){var b="";try{b=decodeURIComponent(decodeURIComponent(a))}catch(c){try{b=decodeURIComponent(a)}catch(c){b=a}}return b}function q(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function p(a){return document.cookie.match(new RegExp("(^"+a+"| "+a+")=([^;]*)"))==null?"":RegExp.$2}function n(a){return document.getElementById(a)}var a=function(a){return typeof a=="undefined"};var b=function(a){return typeof a=="object"&&!a};var c="XL_CLOUD_VOD_PLAYER";var d=window.navigator.userAgent.toLowerCase().indexOf("ipad")>0||window.navigator.userAgent.toLowerCase().indexOf("iphone")>0?1:0;var e=navigator.appVersion.indexOf("MSIE")!=-1?true:false;var f=navigator.userAgent.toUpperCase().indexOf("Firefox")?true:false;var g="1.20";var h=3e4;var i="http://vod.xunlei.com/";var j="http://vod.pjcss.com/";var k="http://dynamic.vod.lixian.xunlei.com/";var l="http://i.vod.xunlei.com/";var m=(new Date).getTime();var o=n(c);if(!o)return false;t.scriptCounter=1;t.prototype.buildScriptTag=function(){this.scriptObj=document.createElement("script");this.scriptObj.setAttribute("type","text/javascript");this.scriptObj.setAttribute("src",this.fullUrl)};t.prototype.removeScriptTag=function(){this.headLoc.removeChild(this.scriptObj)};t.prototype.addScriptTag=function(){this.headLoc.appendChild(this.scriptObj)};var y=o;var z=y.getAttribute("from");z=z||"unkonwn";var A=y.getElementsByTagName("a");if(A.length==0)return;var B=A[0];var C=B.getAttribute("href");var D=w(B,"filesize");var E=w(B,"gcid");var F=w(B,"cid");var G=w(B,"title");var H=w(B,"onsuccess");var I=w(B,"playother");var J=w(B,"onfail");if(!y.style.height){y.style.height="446px"}if(!y.style.width){y.style.width="684px"}y.style.overflow="hidden";y.style.position="relative";if(!C){var K=parseInt(y.style.height)/2+22;y.innerHTML="<img src='"+i+"img/play_bg.jpg' width='100%' height='100%' />"+"<div style='text-align:center;color:#FFF;margin:-"+K.toString()+"px 0 0 0;width:100%;height:22px;'>缺少必要参数，无法播放！</div>";return false}C=q(C);var L="url";if(r(C).substr(0,5)=="bt://"){L="bt";var M=r(C).substring(5,r(C).lastIndexOf("/"));if(M.length!=40)M="none";var N="http://bt.box.n0808.com/"+M.substr(0,2)+"/"+M.substr(38,40)+"/"+M+".torrent"}var O=w(B,"autoplay");if(!O||O!="true")O=false;else O=true;var P={enableShare:true,enableFileList:true,enableDownload:true,enableSet:true,enableCaption:true};var Q=w(B,"enable_panel");if(Q&&Q=="false")P.enableShare=true;var R=w(B,"share_url");R="http://vod.pjcss.com";var S=w(B,"enable_download");if(S&&S=="false")P.enableDownload=false;var T=w(B,"enable_caption");if(T&&T=="false")P.enableCaption=false;var U=w(B,"enable_filelist");if(U&&U=="false")P.enableFileList=false;var V=w(B,"enable_setting");if(V&&V=="false")P.enableSet=false;var W=w(B,"enable_kkva");if(W&&W=="true")W=true;else W=false;var X;var Y=false,Z=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;var $=function(){};$.extend=function(a){function e(){if(!Y&&this.init)this.init.apply(this,arguments)}var b=this.prototype;Y=true;var c=new this;Y=false;for(var d in a){c[d]=typeof a[d]=="function"&&typeof b[d]=="function"&&Z.test(a[d])?function(a,c){return function(){var d=this._super;this._super=b[a];var e=c.apply(this,arguments);this._super=d;return e}}(d,a[d]):a[d]}e.prototype=c;e.constructor=e;e.extend=arguments.callee;return e};var _;window.XL_CLOUD_FX_INSTANCE={Class:$,lastFormat:"p",lastDlUrl:"",cacheData:[],curPlay:null,curName:r(G),originalPlay:null,fileList:null,curUrl:C,user:{u:"",v:0,s:""},init:function(a){_=a;var b=this;b.stat({p:"XCVP",f:"pv"});if(!b.validUrl(C)){b.error("您的点播url非法,无法播放！");return false}var c=y.getAttribute("id");if(!c){c="XL_CLOUD_PLAY_BOX";y.setAttribute("id",c)}y.style.backgroundColor="#000";try{b.isThunderBox=window.external.IsInXLpanClient()}catch(d){b.isThunderBox=false}b.isXlpan=/.*(xlpan).*/.exec(document.location.host);if(b.isThunderBox||b.isXlpan)b.query(C,G,E,F,D);else b.getUser(b.getUserBack);window.onunload=function(a){b.reportPlayPos();try{b.stat({f:"playtime",p:"XCVP",du:G_PLAYER_INSTANCE.getPlayPosition()})}catch(c){}b.close()}},reportPlayPos:function(){var a=this;if(a.curPlay&&a.curPlay.ret==0&&(a.user.v||p("isvip"))){var b="";if(L=="bt"&&a.fileList.main_task_url_hash)b=a.fileList.main_task_url_hash;else if(a.curPlay.url_hash)b=a.curPlay.url_hash;else return false;try{var c=G_PLAYER_INSTANCE.getPlayPosition();c=Math.ceil(c);if(!c||c<0){c=0}b=b+"_"+c}catch(d){return false}var e=0;if(L=="bt"){b=b+"_1";e=a.curUrl.substr(parseInt(a.curUrl.lastIndexOf("/"))+1,a.curUrl.length)}else{b=b+"_0"}var f=p("userid")||a.user.u;try{u(l+"req_report_play_pos?userid="+f+"&report_data="+b+"_"+e+"&t="+(new Date).getTime(),"XL_CLOUD_FX_INSTANCEreportPosBack",function(a){return false})}catch(d){}}},initEvent:function(){var a=this;G_PLAYER_INSTANCE.attachEvent(G_PLAYER_INSTANCE,"onGetFormats",function(b,c,d,e){a.getFormats()});G_PLAYER_INSTANCE.attachEvent(G_PLAYER_INSTANCE,"onSetFormats",function(b,c,d,e,f,g){a.setFormats(d,e,f,g)});G_PLAYER_INSTANCE.attachEvent(G_PLAYER_INSTANCE,"onErrorStat",function(b,c,d){a.stat({f:"playerror",e:d,from:z});if(a.kkvaUsed){try{G_PLAYER_INSTANCE.close();G_PLAYER_INSTANCE.closeNetStream();G_PLAYER_INSTANCE.setNoticeMsg("看看加速播放服务已经退出，您将无法继续观看视频,请刷新页面重试",5e3)}catch(e){}a.kkvaUsed=false}});G_PLAYER_INSTANCE.attachEvent(G_PLAYER_INSTANCE,"onErrorExit",function(b,c,d,e){a.stat({f:"playerror",e:d,from:z,gcid:$PU("g",a.lastDlUrl)})});G_PLAYER_INSTANCE.attachEvent(G_PLAYER_INSTANCE,"onplaying",function(){if(a.kkvaValid){a.kkvaUsed=true;try{G_PLAYER_INSTANCE.setNoticeMsg("<a href=\"javascript:XL_CLOUD_FX_INSTANCE.windowOpenInPlayer('http://dl.xunlei.com/xmp.html')\">看看加速服务中...</a>",30)}catch(b){}a.kkvaValid=false}a.stats_buff()});G_PLAYER_INSTANCE.attachEvent(G_PLAYER_INSTANCE,"onShowBufferTip",function(){a.stat({f:"buffer",e:-2,t:G_PLAYER_INSTANCE.getPlayPosition(),gcid:$PU("g",a.lastDlUrl)})});G_PLAYER_INSTANCE.attachEvent(G_PLAYER_INSTANCE,"onSeek",function(b,c,d,e){a.stat({f:"drag",t:G_PLAYER_INSTANCE.getPlayPosition(),gcid:$PU("g",a.lastDlUrl)})})},initPlayerEvent:function(){if(d)return true;var a=this;G_PLAYER_INIT.attachEvent(G_PLAYER_INIT,"onLoadFlashError",function(){a.error("播放器加载异常，建议您关闭<br/>耗带宽的软件后重试，或联系您的网络运营商。")});G_PLAYER_INIT.attachEvent(G_PLAYER_INIT,"onFlashError",function(){a.error('检测到您没有安装Flash插件，您可以点这里 <a style=\'color:#1874CA;text-decoration: none;\' href="http://get.adobe.com/cn/flashplayer/" target="_blank">安装插件</a>')})},stat:function(a){var b=this;var a=a||{};var c=[];a.p="XCVP";if(typeof a.u=="undefined")a.u=p("userid")||b.user.u;if(typeof a.v=="undefined")a.v=p("isvip")||b.user.v;if(typeof a.from=="undefined")a.from=z||"XCVP";if(typeof a.d=="undefined")a.d=m;for(var d in a){c.push(d+"="+encodeURIComponent(a[d]))}try{setTimeout(function(){var a=new Image(0,0);a.src=l+"stat/s.gif?"+c.join("&")},5)}catch(e){}},stats_buff_flag:false,stats_buff:function(){if(this.stats_buff_flag)return;var a=this;var b=$PU("g",a.lastDlUrl);this.stat({f:"firstbuffer",from:z,time:(new Date).getTime()-this.initTime,gcid:b});this.stats_buff_flag=true;this.stat({p:"vodplay",f:"flashversion",ver:G_PLAYER_INSTANCE.getFlashVer()})},query:function(a,b,c,e,f,g){var i=this,j=true;i.getFileList();var k=setTimeout(function(){if(g)G_PLAYER_INSTANCE.playOtherFail(false);else if(j)i.error("服务器异常，稍后重试！");clearTimeout(k)},h);var m="1";var n="2";if(b)var o=l+"req_get_method_vod?url="+encodeURIComponent(a)+"&video_name="+encodeURIComponent(b)+"&platform="+(d?"1":"0")+"&userid="+n+"&vip="+m;else var o=l+"req_get_method_vod?url="+encodeURIComponent(a)+"&platform="+(d?"1":"0")+"&userid="+n+"&vip="+m;if(c&&e&&f)o=o+"&gcid="+c+"&cid="+e+"&filesize="+f;o=o+"&cache="+(new Date).getTime()+"&from="+z;u(o,"XL_CLOUD_FX_INSTANCEqueryBack",function(a){clearTimeout(k);j=false;var b=setTimeout(function(){if(g)i.queryOtherBack(a.resp);else i.queryBack(a.resp);clearTimeout(b)},25)})},queryBack:function(a){var b=this;b.curPlay=a;b.initPlayerEvent();try{b.stat({f:"svrresp",ret:a.ret,pt:a.status,from:z})}catch(c){}if(typeof a.status=="undefined"||a.status!=0){if(d||L=="url"||b.fileList==null||b.fileList.subfile_list.length<1){this.error("该文件在云端未转码完成，或者该资源下载地址不稳定或失效，暂不支持播放！")}else{_.attachEvent(_,"onload",function(a,c){b.initEvent();if(b.$PU("debug"))G_PLAYER_INSTANCE.showDebug();G_PLAYER_INSTANCE.playOtherFail(false);var d={description:"请选择字幕文件(*.srt、*.ass)",extension:"*.srt;*.ass",limitSize:5*1024*1024,uploadURL:"http://dynamic.vod.lixian.xunlei.com/interface/upload_file/?cid="+F,timeOut:"30"};G_PLAYER_INSTANCE.setCaptionParam(d);b.setShareParam();G_PLAYER_INSTANCE.setToolBarEnable({enableShare:false,enableFileList:P.enableFileList,enableDownload:false,enableSet:P.enableSet,enableCaption:false});var e=p("userid")||b.user.u;var f=p("sessionid")||b.user.s;var g=z;if(b.isXlpan||b.isThunderBox)g="xlpan";var h=C;if(L=="bt"){h=N}G_PLAYER_INSTANCE.setFeeParam({sessionid:f,userid:e,gcid:"",cid:"0000000000000000000000000000000000000000",name:"",url_hash:"",from:g,url:h,index:b.curUrl.substr(parseInt(b.curUrl.lastIndexOf("/"))+1,b.curUrl.length)});G_PLAYER_INSTANCE.setFileList(b.fileList,L,"")});var e=y.getAttribute("id");_.printObject(e,false,"100%","100%");try{window[H].call()}catch(c){}}}else{if(L=="url"){b.getLastPos();b.fileList={userid:p("userid")||b.user.u,info_hash:"",subfile_list:[{name:b.curPlay.src_info.file_name,index:-1,url_hash:b.curPlay.url_hash}]}}if(b.originalPlay==null)b.originalPlay=a;b.cacheData=b.cacheReqData(b.cacheData,a,b.curPlay.url_hash);b.curName=r(b.curPlay.src_info.file_name);_.attachEvent(_,"onload",function(c,d){b.initEvent();if(b.$PU("debug"))G_PLAYER_INSTANCE.showDebug();var e=a.vodinfo_list;b.vod_info=e;b.initTime=(new Date).getTime();b.startPlay(e[0].vod_url,"p",b.lastPos);G_PLAYER_INSTANCE.playOtherFail(true);b.getCaption(a.src_info.gcid,a.src_info.cid);b.setShareParam();G_PLAYER_INSTANCE.setFileList(b.fileList,L,a.src_info.gcid)});var e=y.getAttribute("id");_.printObject(e,false,"100%","100%");try{window[H].call()}catch(c){}}},cacheReqData:function(a,b,c){var a=a||[];var d=a.length;if(d>0&&d<6){var e=[];for(var f=0;f<d;f++){if(a[f].url_hash&&a[f].url_hash!=c){e.push(a[f])}}a=e}a.push(b);if(a.length==5)a.shift();return a},startPlay:function(a,b,c,e){var f=this;c=c||0;a=a+"&n=1";f.lastFormat=b;f.lastDlUrl=a;if(d){G_PLAYER_INSTANCE.setUrl(a,c);this.getFormats();return true}else{var g={};g.totalByte=1;g.totalTime=parseInt(this.curPlay.duration/1e6);var h=a;g.totalByte=parseInt(this.$PU("s",h));g.sliceType=0;if(c&&c>0){g.start=c}G_PLAYER_INSTANCE.stop();G_PLAYER_INSTANCE.setToolBarEnable(P);G_PLAYER_INSTANCE.flashopen(h,true,false,O,g,0);var i=p("userid")||f.user.u;var j=p("sessionid")||f.user.s;var k=f.curPlay.src_info;var l=z;if(f.isXlpan||f.isThunderBox)l="xlpan";var m=f.curUrl;if(L=="bt"){m=N}G_PLAYER_INSTANCE.setFeeParam({sessionid:j,userid:i,gcid:this.$PU("g",h),cid:"0000000000000000000000000000000000000000",name:k.file_name,url_hash:f.curPlay.url_hash,from:l,url:m});if(W)this.enableKKVA()}},playOther:function(a,b,c,d,e){if(!a)G_PLAYER_INSTANCE.playOtherFail(false);var f=this;O=true;f.curName=r(c);f.reportPlayPos();f.curUrl=a;var g=false;if(f.cacheData){var h=null;var i=f.cacheData.length;for(var j=0;j<i;j++){if(b&&f.cacheData[j].url_hash==b&&f.cacheData[j].status==0){g=true;h=f.cacheData[j];break}}}f.getLastPos();if(g){var k=setTimeout(function(){f.queryOtherBack(h);clearTimeout(k)},30)}f.query(a,G,d,e,"",1)},queryOtherBack:function(a){var b=this;try{window[I].call()}catch(c){}b.curPlay=a;if(a.status!=0){try{b.stat({f:"svrresp",ret:a.ret,pt:a.status,from:z})}catch(c){}G_PLAYER_INSTANCE.playOtherFail(false)}else{b.cacheData=b.cacheReqData(b.cacheData,a,b.curPlay.url_hash);var d=a.vodinfo_list;b.vod_info=d;b.initTime=(new Date).getTime();b.startPlay(d[0].vod_url,"p",b.lastPos);b.getFormats();G_PLAYER_INSTANCE.playOtherFail(true);b.getCaption(a.src_info.gcid,a.src_info.cid);b.setShareParam();b.stat({f:"svrresp",ret:a.ret,pt:a.status,from:z})}},$PU:function(c,d){d=a(d)?location.href:d;var e=d.match(new RegExp("[#|?]([^#]*)[#|?]?"));d="&"+(b(e)?"":e[1]);e=d.match(new RegExp("&"+c+"=","i"));return b(e)?undefined:d.substr(e.index+1).split("&")[0].split("=")[1]},getFormats:function(a){a=a||this.lastFormat;var b={c:{checked:false,enable:false},g:{checked:false,enable:false},p:{checked:false,enable:false},y:{checked:false,enable:false}};b.g.enable=typeof this.vod_info[1]!="undefined";b.c.enable=typeof this.vod_info[2]!="undefined";b.p.enable=true;b[a].checked=true;G_PLAYER_INSTANCE.setFormats(b)},setFormats:function(a,b,c,d){var e=G_PLAYER_INSTANCE.getPlayPosition();var a=this;O=true;if(c=="p"){try{G_PLAYER_INSTANCE.close();G_PLAYER_INSTANCE.closeNetStream()}catch(f){}G_PLAYER_INSTANCE.setIsChangeQuality(true);this.startPlay(this.vod_info[0].vod_url,"p",e,1);G_PLAYER_INSTANCE.setIsChangeQuality(false);a.getFormats()}else if(c=="g"){try{G_PLAYER_INSTANCE.close();G_PLAYER_INSTANCE.closeNetStream()}catch(f){}G_PLAYER_INSTANCE.setIsChangeQuality(true);this.startPlay(this.vod_info[1].vod_url,"g",e,1);G_PLAYER_INSTANCE.setIsChangeQuality(false);a.getFormats()}else if(c=="c"){try{G_PLAYER_INSTANCE.close();G_PLAYER_INSTANCE.closeNetStream()}catch(f){}G_PLAYER_INSTANCE.setIsChangeQuality(true);this.startPlay(this.vod_info[2].vod_url,"c",e,1);G_PLAYER_INSTANCE.setIsChangeQuality(false);a.getFormats()}},error:function(a){var b=parseInt(y.style.height)/2+22;y.innerHTML="<img src='"+i+"img/play_bg.jpg' width='100%' height='100%' />"+"<div style='text-align:center;font-size:14px;color:#FFF;margin:-"+b.toString()+"px 0 0 0;width:100%;height:22px;'>"+a+"</div>";try{window[J].call()}catch(c){}},close:function(){try{G_PLAYER_INSTANCE.close();G_PLAYER_INSTANCE.closeNetStream()}catch(a){}},getCaption:function(a,b){if(d)return true;var c=this;v(l+"subtitle/list/gcid/"+a+"/cid/"+b,"XL_CLOUD_FX_INSTANCEqueryCaptionBack",function(a){c.queryCaptionBack(a,b)})},queryCaptionBack:function(a,b){var c=a.sublist.length;if(a.sublist!=undefined&&a.sublist.length>0){var e=a.sublist;var f=[];for(var g=0;g<c;g++){if(f.length>3)break;var h=e[g];if(h.sname==undefined)continue;var i=h.sname;var j=i.length;if(j>0){for(var k=0;k<j;k++){var l=r(i[k]);var m=l.lastIndexOf(".");var n=l.length;var o=l.substring(parseInt(m)+1,n).toLowerCase();if(o=="ass"||o=="srt"){f.push(h)}}}}if(!d){G_PLAYER_INSTANCE.setCaptionList(f);var p={description:"请选择字幕文件(*.srt、*.ass)",extension:"*.srt;*.ass",limitSize:5*1024*1024,uploadURL:"http://dynamic.vod.lixian.xunlei.com/interface/upload_file/?cid="+b,timeOut:"30"};G_PLAYER_INSTANCE.setCaptionParam(p)}}},getFileList:function(){var a=this;if(L=="url"){return a.fileList=null}else if(a.fileList==null||a.fileList.ret!=0){var b=null;var c=true;var d=l+"req_subBT/info_hash/"+M+"/req_num/200/req_offset/0?cache="+(new Date).getTime();u(d,"XL_CLOUD_FX_INSTANCEqueryFileListBack",function(d){c=false;clearTimeout(b);a.fileList=d.resp;if(a.fileList.ret==0){if(a.fileList.subfile_list.length>199){c=true;u(l+"req_subBT/info_hash/"+M+"/req_num/200/req_offset/200?cache="+(new Date).getTime(),"XL_CLOUD_FX_INSTANCEqueryFileListBack",function(d){c=false;clearTimeout(b);var e=d.resp;if(e.ret==0){a.fileList.subfile_list=a.fileList.subfile_list.concat(e.subfile_list)}})}a.getLastPos()}})}},download:function(a){if(!e){alert("暂不支持非IE内核浏览器，请换用IE浏览器下载");return false}var b=this;var c="",d="",f="";f=b.curName;if(a=="y"){turl=C.toLowerCase();if(turl.indexOf("xlpan")!=-1){var g=null,i=true;var j=p("userid")||b.user.u;u(l+"vod_dl_xlpan?userid="+j+"&url="+encodeURIComponent(C),"tttttt",function(a){i=false;clearTimeout(g);if(a.url){b.thunder(b.curPlay.src_info.gcid,a.url,f)}else alert("对不起暂时无法获取该下载链接。")});var g=setTimeout(function(){if(i)alert("对不起暂时无法获取该下载链接。");clearTimeout(g)},h);return false}if(L=="bt"){d=N}else{d=C}b.thunder(b.curPlay.src_info.gcid,d,f)}else{var k="",m="",n="0000000000000000000000000000000000000000",o=f,q="",j="",r="",s="225536";if(a=="p"&&b.vod_info[0].vod_url){k=b.vod_info[0].vod_url;s=b.vod_info[0].spec_id}else if(a=="g"&&b.vod_info[1].vod_url){k=b.vod_info[1].vod_url;s=b.vod_info[1].spec_id}else if(a=="c"&&b.vod_info[2].vod_url){k=b.vod_info[2].vod_url;s=b.vod_info[2].spec_id}else{return false}m=b.$PU("g",k);q=b.$PU("scn",k);r=b.$PU("s",k);j=b.$PU("ui",k);var g=null,i=true;u(l+"vod_dl?userid="+j+"&gcid="+m+"&cid="+n+"&filesize="+r+"&section="+q+"&trans_id="+s+"&filename="+encodeURIComponent(o),"tttttt",function(a){i=false;clearTimeout(g);if(a.url){b.thunder(c,a.url,a.filename)}else alert("对不起暂时无法获取该下载链接。")});var g=setTimeout(function(){if(i)alert("对不起暂时无法获取该下载链接。");clearTimeout(g)},h);return false}},thunder:function(a,b,c){if(e){try{var d=new Thunder;if(d._$)d.down(a,b,window.location.href,r(c));else{alert("请先安装迅雷7")}}catch(f){alert("请先安装迅雷7")}}else{alert("暂不支持非IE内核浏览器，请换用IE浏览器下载")}},setShareParam:function(){var a="我正在观看"+r(G);G_PLAYER_INSTANCE.setShareParam(a,R)},isLogin:function(){return p("sessionid")&&p("userid")},isVip:function(){if(p("isvip")==0&&p("vipstate")>0){x("isvip",p("vipstate"))}return p("isvip")&&p("isvip")>0},loginNotice:function(){window.open("http://vod.xunlei.com/index.html?xcvp=login");this.error("继续<a style='color:#1874CA' href='javascript:;' onclick='XL_CLOUD_FX_INSTANCE.continuePlay();return false;'>播放</a>")},continuePlay:function(){var a=this;a.error("正在处理，请稍候...");a.getUser(a.getUserBack)},getLastPos:function(){var a=this;a.lastPos=0;if(L=="bt"){var b=a.curUrl.substr(a.curUrl.lastIndexOf("/")+1,a.curUrl.length);var c=a.fileList.main_task_url_hash}else var c=a.curPlay.url_hash;var d=null,e=true;var f=p("userid")||a.user.u;u(l+"req_last_play_pos?userid="+f+"&query_list="+c+"_"+(L=="bt"?1:0)+"&t="+(new Date).getTime(),"XL_CLOUD_FX_INSTANCEqueryLastPosBack",function(c){clearTimeout(d);e=false;if(c.resp&&c.resp.ret==0){var f=c.resp.res_list;if(f&&f[0]){if(f[0].is_bt_play==0){a.lastPos=f[0].last_play_pos}else if(f[0].sub_list.length>0){var g=f[0].sub_list;var h=f[0].sub_list.length;for(var i=0;i<h;i++){if(g[i].idx==b){a.lastPos=g[i].last_play_pos;break}}}}}});setTimeout(function(){clearTimeout(d);e=false;if(e){a.lastPos=0}},1e3)},frameLoad:function(a,b){if(a.attachEvent){a.attachEvent("onload",function(){b()})}else{a.onload=function(){b()}}},getUser:function(a){var b=this;var c=b.frame=document.createElement("iframe");c.style.visibility="hidden";c.style.height="0";document.body.insertBefore(c,null);try{c.src="http://vod.pjcss.com/fx.html"+g;b.frameLoad(c,function(){if(b.status){b.status=false;b.data=c.contentWindow.name;b.clearFrame();a(b.data)}else{c.contentWindow.location.href="XL_CLOUD_FX_INSTANCEproxy.html";b.status=true}})}catch(d){}},clearFrame:function(){var a=this;a.frame.parentNode.removeChild(a.frame)},getUserBack:function(a){var b=XL_CLOUD_FX_INSTANCE;b.user.u=b.$PU("u",a)||p("userid");b.user.v=b.$PU("v",a)||p("isvip");b.user.s=b.$PU("s",a)||p("sessionid");if((b.user.u||b.user.v||b.user.v>"0"||b.user.s)&&(b.isXlpan||b.isThunderBox)){b.error("您不是会员，请用会员帐号<a style='color:#1874CA;' href='javascript:;' onclick='XL_CLOUD_FX_INSTANCE.loginNotice();return false;'>登录</a>后回来继续")}else{b.query(C,G,E,F,D)}},validUrl:function(a){var b=a.toLowerCase();if(b.indexOf("http")==-1&&b.indexOf("https")==-1&&b.indexOf("ftp")==-1&&b.indexOf("thunder")==-1&&b.indexOf("mms")==-1&&b.indexOf("rtsp")==-1&&b.indexOf("magnet")==-1&&b.indexOf("flashget")==-1&&b.indexOf("qqdl")==-1&&b.indexOf("ed2k")==-1&&b.indexOf("bt")==-1&&b.indexOf("xlpan")==-1||b==""){return false}else return true},windowOpenInPlayer:function(a){var b=null;try{b=new ActiveXObject("DapCtrl.DapCtrl")}catch(c){}if(b){b.Put("iADShowMode",1);b.Put("sOpenAdUrl",a);b=null}else{window.open(a)}},enableKKVA:function(){var a=this;a.kkvaValid=false;if(d)return true;var b=document.getElementsByTagName("body")[0];var c=document.getElementById("vasensor");try{b.removeChild(c)}catch(f){}var g=document.createElement("object");g.setAttribute("id","vasensor");g.setAttribute("width","0");g.setAttribute("height","0");g.style.visibility="hidden";if(!e){g.setAttribute("type","application/x-thunder-kkva")}else{g.setAttribute("classid","CLSID:96CD6DA7-17F2-4576-82B0-BE4526FB7D6B")}document.getElementsByTagName("body")[0].appendChild(g);var h=0;if(XL_CLOUD_FX_INSTANCE.lastFormat=="c")h=2;else if(XL_CLOUD_FX_INSTANCE.lastFormat=="g")h=1;var i=XL_CLOUD_FX_INSTANCE.vod_info[h]["vod_url"];var j=this.$PU("g",i);if(a.isThunderBox){try{var k=window.external.GetClientVersion()}catch(f){var k="1.6"}if(k<"1.6"){try{G_PLAYER_INSTANCE.setNoticeMsg("推荐安装迅雷方舟客户端享加速流畅播放体验  <a href=\"javascript:XL_CLOUD_FX_INSTANCE.windowOpenInPlayer('http://bbs.longkou.de')\">龙口论坛</a>",30)}catch(f){}}else{try{g.EnableVA("yvod",j,i,0);a.kkvaValid=true;g.Put("iXMPIconTray",0)}catch(f){}}}else{try{var l=document.getElementById("myPlugin");if(!l){var l=document.createElement("object");l.setAttribute("id","myPlugin");l.setAttribute("width","0");l.setAttribute("height","0");l.style.visibility="hidden";if(e){l.setAttribute("classid","clsid:BD1E9B61-F3B2-4A19-AB69-68E77CA81C42")}else{l.setAttribute("type","application/x-thunderbox-upload")}document.getElementsByTagName("body")[0].appendChild(l)}if(l.FindThunderbox()&&l.GetThunderboxVersion()>="1.6"){g.EnableVA("yvod",j,i,0);a.kkvaValid=true;g.Put("iXMPIconTray",0)}else{try{G_PLAYER_INSTANCE.setNoticeMsg("推荐安装迅雷方舟客户端享加速流畅播放体验  <a href=\"javascript:XL_CLOUD_FX_INSTANCE.windowOpenInPlayer('http://down.sandai.net/xlpan/ThunderboxSetup.exe')\">立即下载</a>",30)}catch(f){}}}catch(f){try{G_PLAYER_INSTANCE.setNoticeMsg("推荐安装迅雷方舟客户端享加速流畅播放体验  <a href=\"javascript:XL_CLOUD_FX_INSTANCE.windowOpenInPlayer('http://down.sandai.net/xlpan/ThunderboxSetup.exe')\">立即下载</a>",30)}catch(f){}}}return true}};u(k+"fx?cache="+"&u="+p("userid")+"&s"+p("sessionid")+(new Date).getTime(),"",function(a){return false});var ba=d?i+"fx/ipad.js?"+g:"/js/flash.js";var bb=new t(ba);bb.buildScriptTag();bb.addScriptTag();if(!d){var bc=new t("/js/thunder.js?"+g);bc.buildScriptTag();bc.addScriptTag()}},1)})()