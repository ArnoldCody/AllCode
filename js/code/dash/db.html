<html>
<head>
<title></title>

<!--
本例使用了jquery
-->

<script src="jquery-1.3.2.js" type="text/javascript"></script>

</head>

<body>
<form id="myForm" >

<h2>Add New Item To Local Storage</h2>
<div id="pnlLocalStorageTest">
Key <input type="text" id="txtAddK" />&nbsp;&nbsp
Value<input type="text" id="txtAddV" />
<input type="button" id="btnAddItem" value="Add" />
</div>
<h2>Remove Item or Clear</h2>
<br />
<div>
Key<input type="text" id="txtRemoveK" />
<input type="button" id="btnRemoveItem" value="Remove" />
<input type="button" id="btnClear" value="Clear" />
</div>

<h2>All Key/Value pairs</h2>
<div style="width:500px;height:400px;background:#d3d3d3" id="pnlAll">
</div>
<script type="text/javascript">

////浏览器是否支持本地存储
    function supports_html5_storage() {  
      try {  
        return 'localStorage' in window && window['localStorage'] !== null;  
      } catch (e) {  
        return false;  
      }  
   }

$(document).ready(function(){
showStorage();
});

////添加键值对
$("#btnAddItem").click(
function(){

if($.trim($("#txtAddK").val()) == "" || $.trim($("#txtAddV").val()) == ""){
alert("key or value can not be null!!");
return;
}
localStorage.setItem( $("#txtAddK").val(), $("#txtAddV").val() );

showStorage();
});

////删除某个键值对
$("#btnRemoveItem").click(function(){

if($.trim($("#txtRemoveK").val()) == "" ){
alert("The Key To Be Removed can not be null!!");
return;
}

localStorage.removeItem($("#txtRemoveK").val());
showStorage();
});

////清空所有键值对
$("#btnClear").click(function(){
localStorage.clear();
showStorage();
});

////显示localStorage里的键值对
function showStorage(){

 var content = "";
 for(var i=0;i<localStorage.length;i++){
  //key(i)获得相应的键，再用getItem()方法获得对应的值
   content += localStorage.key(i)+ " : " + localStorage.getItem(localStorage.key(i)) + "<br />";
}
$("#pnlAll").html(content);

 }


</script>
</form>
</body>
</html>